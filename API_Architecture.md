# Restaurant Management System API Architecture

## Содержание
1. [Общее понимание проекта](#общее-понимание-проекта)
2. [Архитектура приложения](#архитектура-приложения)
3. [Компоненты системы](#компоненты-системы)
4. [Как работает приложение](#как-работает-приложение)
5. [Фронтенд архитектура](#фронтенд-архитектура)
6. [Технологический стек](#технологический-стек)
7. [Рекомендации по защите](#рекомендации-по-защите)

## Общее понимание проекта

### Что такое ресторанная система?
Представьте, что вы управляете рестораном. Вам нужно:
- Показывать меню гостям
- Принимать заказы
- Управлять столиками
- Отслеживать статус заказов

Наша система помогает автоматизировать все эти процессы!

### Как это работает?
1. **Для гостей:**
   - Они видят красивое меню на планшете
   - Могут выбрать блюда
   - Сделать заказ
   - Увидеть статус своего заказа

2. **Для персонала:**
   - Официанты видят свободные столики
   - Могут принимать заказы
   - Отслеживать готовность блюд
   - Управлять меню

3. **Для администраторов:**
   - Управление меню
   - Добавление новых блюд
   - Просмотр статистики
   - Управление персоналом

## Архитектура приложения
Приложение построено на N-слойной архитектуре, которая включает следующие слои:
- Controllers (Презентационный слой)
- Services (Бизнес-логика)
- Models (Доменная модель)
- DTOs (Data Transfer Objects)
- Data (Слой доступа к данным)

## Компоненты системы

### 1. Контроллеры (Controllers)
- Обрабатывают HTTP-запросы
- Основные контроллеры:
  - `MenuController` - управление меню и категориями
  - `OrdersController` - управление заказами
  - `TablesController` - управление столиками
- Используют атрибуты для маршрутизации
- Каждый метод обрабатывает определенный HTTP-метод (GET, POST, PUT, DELETE)

### 2. Сервисы (Services)
- Содержат бизнес-логику приложения
- Реализуют интерфейсы для обеспечения слабой связанности
- Основные сервисы:
  - `IMenuService`/`MenuService` - логика работы с меню
  - `IOrderService`/`OrderService` - логика работы с заказами
  - `ITableService`/`TableService` - логика работы со столиками

### 3. Модели (Models)
- Представляют структуру данных
- Используются Entity Framework Core для маппинга с базой данных
- Определяют отношения между сущностями

### 4. DTOs (Data Transfer Objects)
- Объекты для передачи данных между слоями
- Отделяют внутреннюю модель от внешнего представления
- Основные DTOs:
  - `CreateMenuItemDto` - для создания блюда
  - `UpdateMenuItemDto` - для обновления блюда
  - `MenuItemDto` - для отображения информации о блюде

### 5. Data (Слой доступа к данным)
- Содержит контекст базы данных
- Определяет связи между моделями
- Управляет миграциями

## Как работает приложение

### 1. Поток запроса
```
HTTP Request → Controller → Service → Database
```

### 2. Пример обработки запроса
- Клиент отправляет GET-запрос на `/api/menu/items`
- `MenuController` получает запрос
- Контроллер вызывает `_menuService.GetMenuItemsAsync()`
- Сервис выполняет бизнес-логику
- Данные извлекаются из базы данных
- Результат возвращается клиенту

### 3. Безопасность
- Используется встроенная система аутентификации и авторизации
- Контроллеры могут быть защищены атрибутами `[Authorize]`
- Валидация данных происходит на уровне DTOs

### 4. Обработка ошибок
- Используется try-catch для обработки исключений
- Возвращаются соответствующие HTTP-статусы
- Документированы возможные ответы через `[ProducesResponseType]`

### 5. Документация API
- Используется Swagger/OpenAPI
- Методы документированы с помощью XML-комментариев
- Определены типы ответов и возможные ошибки

## Фронтенд архитектура

### Что такое Vue.js?
Vue.js - это как конструктор LEGO для создания веб-страниц. Каждая часть страницы - это отдельный блок (компонент), который можно переиспользовать.

### Как устроена страница?
Представьте, что страница - это дом:
1. **Шапка (Header)** - как крыша дома
   - Логотип
   - Меню навигации
   - Кнопки входа/выхода

2. **Основной контент (Main Content)** - как комнаты в доме
   - Меню ресторана
   - Список столиков
   - Форма заказа

3. **Подвал (Footer)** - как фундамент
   - Контактная информация
   - Ссылки на соцсети
   - Дополнительная информация

### Компоненты Vue.js
Каждый компонент состоит из трех частей:
1. **Template (Шаблон)** - как выглядит компонент
   ```html
   <template>
     <div class="menu-item">
       <img :src="item.image" />
       <h3>{{ item.name }}</h3>
       <p>{{ item.price }}</p>
     </div>
   </template>
   ```

2. **Script (Логика)** - что делает компонент
   ```javascript
   <script>
   export default {
     data() {
       return {
         item: {
           name: 'Пицца',
           price: 500,
           image: 'pizza.jpg'
         }
       }
     }
   }
   </script>
   ```

3. **Style (Стили)** - как компонент выглядит
   ```css
   <style>
   .menu-item {
     border: 1px solid #ccc;
     padding: 10px;
     margin: 10px;
   }
   </style>
   ```

### Как работает взаимодействие с API?
1. **Получение данных:**
   ```javascript
   async getMenuItems() {
     const response = await fetch('/api/menu/items');
     this.items = await response.json();
   }
   ```

2. **Отправка данных:**
   ```javascript
   async createOrder(order) {
     const response = await fetch('/api/orders', {
       method: 'POST',
       body: JSON.stringify(order)
     });
     return await response.json();
   }
   ```

### Основные страницы приложения

1. **Главная страница:**
   - Список категорий меню
   - Популярные блюда
   - Информация о ресторане

2. **Страница меню:**
   - Фильтры по категориям
   - Список блюд
   - Корзина заказа

3. **Страница столиков:**
   - Схема ресторана
   - Статус столиков
   - Форма бронирования

4. **Страница заказов:**
   - Список активных заказов
   - Статус заказов
   - История заказов

5. **Админ-панель:**
   - Управление меню
   - Управление столиками
   - Статистика и отчеты

### Как это всё работает вместе?
1. Пользователь открывает страницу
2. Vue.js загружает необходимые компоненты
3. Компоненты делают запросы к API
4. API обрабатывает запросы и возвращает данные
5. Vue.js обновляет страницу с новыми данными

## Технологический стек
- .NET 8.0
- Entity Framework Core
- PostgreSQL
- Swagger/OpenAPI
- REST API архитектура

## Рекомендации по защите
1. Добавить аутентификацию и авторизацию
2. Внедрить валидацию входных данных
3. Использовать HTTPS
4. Добавить rate limiting
5. Реализовать логирование
6. Настроить CORS политики
7. Использовать безопасные заголовки HTTP 